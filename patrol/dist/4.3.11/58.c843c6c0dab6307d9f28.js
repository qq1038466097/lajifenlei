webpackJsonp([58],{800:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(3),u=n(r),s=a(209),l=n(s),o=a(147),p=n(o);a(210);var d=a(319),i=a(60);e.default={namespace:"proInfoEdit",state:{detail:{},lng:"",lat:"",isSetMap:!1,typeData:[]},subscriptions:{setup:function(t){var e=t.dispatch;t.history.listen(function(t){if("/pro/proList/proInfoEdit"===t.pathname){var a=(0,i.getQueryStringHash)("ids"),n={};n.pointId=a,e({type:"queryDetail",payload:n});var r={};r.pageIndex=1,r.pageSize=100,e({type:"queryTypes",payload:r})}})}},effects:{queryTypes:p.default.mark(function t(e,a){var n,r=e.payload,u=a.call,s=a.put;return p.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(d.dotTypeList,r);case 2:if(n=t.sent,200!=n.code||null===n.data.data){t.next=6;break}return t.next=6,s({type:"setType",payload:n.data.data});case 6:case"end":return t.stop()}},t,this)}),queryDetail:p.default.mark(function t(e,a){var n,r=e.payload,u=a.call,s=a.put;return p.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(d.proDetail,r);case 2:if(n=t.sent,200!=n.code){t.next=10;break}return t.next=6,s({type:"setDetail",payload:n.data});case 6:return t.next=8,s({type:"isSetMap",payload:!0});case 8:return t.next=10,s({type:"setLat",lat:n.data.lat,lng:n.data.lon});case 10:case"end":return t.stop()}},t,this)}),addDot:p.default.mark(function t(e,a){var n,r=e.payload,u=a.call;a.put;return p.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(d.proAdd,r);case 2:n=t.sent,200==n.code&&(200==n.code?(l.default.success("\u4fee\u6539\u6210\u529f!"),setTimeout(function(){history.go(-1)},500)):l.default.error("\u4fee\u6539\u5931\u8d25!"));case 4:case"end":return t.stop()}},t,this)})},reducers:{clearData:function(t){return(0,u.default)({},t,{detail:{},lng:"",lat:"",isSetMap:!1,typeData:[]})},setLat:function(t,e){return(0,u.default)({},t,{lat:e.lat,lng:e.lng})},isSetMap:function(t,e){return(0,u.default)({},t,{isSetMap:e.payload})},setType:function(t,e){return(0,u.default)({},t,{typeData:e.payload})},setDetail:function(t,e){return(0,u.default)({},t,{detail:e.payload})}}},t.exports=e.default}});