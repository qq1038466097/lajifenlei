webpackJsonp([39],{834:function(a,e,t){"use strict";function n(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(e,"__esModule",{value:!0});var r=t(3),u=n(r),s=t(209),d=n(s),c=t(147),o=n(c);t(210);var l=t(319);t(60),t(89);e.default={namespace:"userAdd",state:{data:[],roleData:[],funsData:[]},subscriptions:{setup:function(a){var e=a.dispatch;a.history.listen(function(a){if("/user/add"===a.pathname){var t={};e({type:"queryRule",payload:t}),e({type:"queryFuns",payload:t})}})}},effects:{queryRule:o.default.mark(function a(e,t){var n,r=e.payload,u=t.call,s=t.put;return o.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u(l.roleBindList,r);case 2:if(n=a.sent,200!=n.code||null===n.data.data){a.next=6;break}return a.next=6,s({type:"roleData",payload:n.data.data});case 6:case"end":return a.stop()}},a,this)}),queryFuns:o.default.mark(function a(e,t){var n,r=e.payload,u=t.call,s=t.put;return o.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u(l.funList,r);case 2:if(n=a.sent,200!=n.code||null===n.data.data){a.next=6;break}return a.next=6,s({type:"funsData",payload:n.data.data});case 6:case"end":return a.stop()}},a,this)}),addRole:o.default.mark(function a(e,t){var n,r=e.payload,u=t.call;t.put;return o.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u(l.addUser,r);case 2:n=a.sent,200==n.code?(d.default.success("\u65b0\u589e\u6210\u529f\uff01"),setTimeout(function(){history.go(-1)},500)):d.default.error("\u65b0\u589e\u5931\u8d25\uff0c"+n.msg);case 4:case"end":return a.stop()}},a,this)}),hasAccount:o.default.mark(function a(e,t){var n,r=e.payload,u=e.datas,s=t.call,c=t.put;return o.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s(l.isOnlyAccount,r);case 2:if(n=a.sent,200!=n.code||null!=n.data){a.next=8;break}return a.next=6,c({type:"addRole",payload:u});case 6:a.next=9;break;case 8:d.default.error("\u6539\u8d26\u53f7\u5df2\u7ecf\u5b58\u5728\uff0c\u8bf7\u5f55\u5165\u65b0\u7684\u8d26\u53f7\uff01");case 9:case"end":return a.stop()}},a,this)})},reducers:{clearData:function(a){return(0,u.default)({},a,{data:[],roleData:[],funsData:[]})},roleData:function(a,e){return(0,u.default)({},a,{roleData:e.payload})},funsData:function(a,e){return(0,u.default)({},a,{funsData:e.payload})}}},a.exports=e.default}});