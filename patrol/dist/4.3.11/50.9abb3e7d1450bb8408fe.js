webpackJsonp([50],{788:function(e,a,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var n=t(3),o=r(n),u=t(209),d=r(u),l=t(151),c=r(l),s=t(147),p=r(s);t(210);var i=t(319),f=t(60);a.default={namespace:"editorganization",state:{shows:!0,orgData:[],orgData2:[],userInfo:{},logoUrl:"",checkData:[],checkCount:{},paginationG:{},typedata:[],allData:[],searchList:{},showModal:!0,pageindex:1,pagesize:10,selectedRowKeys:[],selectedRowKeys2:[],roleData:[],roleId:"",chooseOrgId:[]},subscriptions:{setup:function(e){var a=e.dispatch;e.history.listen(function(e){if("/organization/editOrganization"===e.pathname){a({type:"clearData"});var t=(0,f.getQueryStringHash)("ids"),r={};if(null==f.isAdmin){for(var n=f.myOrg,o=0;o<n.length;o++){var u=n[o];u.label=u.orgName,u.value=u.id}a({type:"querySuccess",payload:n})}else a({type:"qeryQrg",payload:r});r.employeeId=t,a({type:"queryUser",payload:r});var d={};d.employeeId=t,d.pageIndex=1,d.pageSize=1e3,a({type:"queryCheck",payload:d});var l={};l.pageIndex=1,l.pageSize=100,a({type:"queryTypes",payload:l});var c={};c.employeeId=t,a({type:"querycheckCount",payload:c}),a({type:"queryRole",payload:{}});var s={};s.userId=t,a({type:"queryRoleUser",payload:s})}})}},effects:{bindUsers:p.default.mark(function e(a,t){var r,n=a.payload,o=t.call;t.put;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(i.BindUser,n);case 2:r=e.sent;case 3:case"end":return e.stop()}},e,this)}),queryRoleUser:p.default.mark(function e(a,t){var r,n=a.payload,o=t.call,u=t.put;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(i.getUserRole,n);case 2:if(r=e.sent,200!=r.code){e.next=7;break}if(null===r.data){e.next=7;break}return e.next=7,u({type:"roleId",payload:r.data[0].roleId});case 7:case"end":return e.stop()}},e,this)}),queryRole:p.default.mark(function e(a,t){var r,n=a.payload,o=t.call,u=t.put;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(i.roleBindList,n);case 2:if(r=e.sent,200!=r.code){e.next=6;break}return e.next=6,u({type:"roleData",payload:r.data.data});case 6:case"end":return e.stop()}},e,this)}),queryRule:p.default.mark(function e(a,t){var r,n,o,u,d,l,c,s=a.payload,f=t.call,y=t.put;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(i.dotList,s);case 2:if(r=e.sent,200!=r.code){e.next=24;break}if(null!=r.data.data&&0!=r.data.data.length){e.next=14;break}return n={},n.total=0,n.pageSize=0,n.current=0,o=0,e.next=12,y({type:"allData",payload:[],page:n});case 12:e.next=24;break;case 14:for(u={},u.total=r.data.totalCount,u.pageSize=r.data.pageSize,u.current=r.data.currentIndex,d=Math.ceil(r.data.totalCount/r.data.pageSize),u.pageCount=d,l=r.data.data,c=0;c<l.length;c++)l[c].key=c;return e.next=24,y({type:"allData",payload:l,page:u});case 24:case"end":return e.stop()}},e,this)}),querycheckCount:p.default.mark(function e(a,t){var r,n,o,u=a.payload,d=t.call,l=t.put;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(i.myCheckPointCount,u);case 2:if(r=e.sent,200!=r.code||null===r.data){e.next=8;break}for(n=r.data,o=0;o<n.length;o++)n[o].key=o;return e.next=8,l({type:"checkCount",payload:r.data});case 8:case"end":return e.stop()}},e,this)}),saveDot:p.default.mark(function e(a,t){var r,n=a.payload,o=t.call,u=t.put;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(i.dotTypeList,n);case 2:if(r=e.sent,200!=r.code||null===r.data.data){e.next=6;break}return e.next=6,u({type:"typedata",payload:r.data.data});case 6:case"end":return e.stop()}},e,this)}),queryTypes:p.default.mark(function e(a,t){var r,n=a.payload,o=t.call,u=t.put;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(i.dotTypeList,n);case 2:if(r=e.sent,200!=r.code||null===r.data.data){e.next=6;break}return e.next=6,u({type:"typedata",payload:r.data.data});case 6:case"end":return e.stop()}},e,this)}),qeryQrg:p.default.mark(function e(a,t){var r,n,o,u,d,l=a.payload,c=t.call,s=t.put;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(i.qeryQrg,l);case 2:if(r=e.sent,200!=r.code){e.next=15;break}return n=r.data,o=function e(a,t){for(var r=0;r<a.length;r++){var n=a[r];n.label=n.orgName,n.value=n.id,n.children&&n.children.length>0&&e(n.children)}},o(n),e.next=9,s({type:"querySuccess",payload:n});case 9:if(u=r.data,!(u.length>0)){e.next=15;break}if(null===u[0].children){e.next=15;break}return d=u[0].children,e.next=15,s({type:"orgData2",payload:u[0].children});case 15:case"end":return e.stop()}},e,this)}),queryUser:p.default.mark(function e(a,t){var r,n,o,u,d,l,s,y,h,g=a.payload,x=t.call,k=t.put;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(i.orgUserInfo,g);case 2:if(r=e.sent,200!=r.code){e.next=23;break}if(null===r.data){e.next=23;break}if("[]"!=(0,c.default)(r.data.orgs)){e.next=12;break}return n=[],n.push(r.data.orgId),e.next=10,k({type:"chooseOrgId",payload:n});case 10:e.next=19;break;case 12:for(o=[],u=r.data.orgs,d=0;d<u.length;d++)o.push(u[d].id);if(l=[],null==f.isAdmin)for(s=0;s<o.length;s++){for(y=!1,h=0;h<f.myOrg.length;h++)f.myOrg[h].id==o[s]&&(y=!0);y&&l.push(o[s])}else l=o;return e.next=19,k({type:"chooseOrgId",payload:l});case 19:return e.next=21,k({type:"setInfo",payload:r.data});case 21:return e.next=23,k({type:"logoUrl",payload:r.data.avatar||""});case 23:case"end":return e.stop()}},e,this)}),queryCheck:p.default.mark(function e(a,t){var r,n,o,u,d,l,c=a.payload,s=t.call,f=t.put;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(i.myCheckPoint,c);case 2:if(r=e.sent,200!=r.code){e.next=23;break}if(null!=r.data.data&&0!=r.data.data.length){e.next=14;break}return n={},n.total=0,n.pageSize=0,n.current=0,o=0,e.next=12,f({type:"setCheck",payload:[],page:n});case 12:e.next=23;break;case 14:for(u={},u.total=r.data.totalCount,u.pageSize=r.data.pageSize,u.current=r.data.currentIndex,d=Math.ceil(r.data.totalCount/r.data.pageSize),u.pageCount=d,l=0;l<r.data.data.length;l++)r.data.data[l].key=l;return e.next=23,f({type:"setCheck",payload:r.data.data,page:u});case 23:case"end":return e.stop()}},e,this)}),addUser:p.default.mark(function e(a,t){var r,n=a.payload,o=t.call;t.put;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(i.addUser,n);case 2:r=e.sent,200==r.code?(d.default.success("\u4fee\u6539\u6210\u529f\uff01"),setTimeout(function(){history.go(-1)},500)):d.default.error("\u4fee\u6539\u5931\u8d25\uff0c"+r.msg);case 4:case"end":return e.stop()}},e,this)})},reducers:{querySuccess:function(e,a){return(0,o.default)({},e,{orgData:a.payload})},clearData:function(e){return(0,o.default)({},e,{orgData:[],userInfo:{},logoUrl:"",checkData:[],checkCount:{},page:{},typedata:[],allData:[],searchList:{},showModal:!1,selectedRowKeys:[],selectedRowKeys2:[],roleData:[],roleId:"",chooseOrgId:[]})},chooseOrgId:function(e,a){return(0,o.default)({},e,{chooseOrgId:a.payload})},roleData:function(e,a){return(0,o.default)({},e,{roleData:a.payload})},roleId:function(e,a){return(0,o.default)({},e,{roleId:a.payload})},checkCount:function(e,a){return(0,o.default)({},e,{checkCount:a.payload})},selectedRowKeys2:function(e,a){return(0,o.default)({},e,{selectedRowKeys2:a.payload})},selectedRowKeys:function(e,a){return(0,o.default)({},e,{selectedRowKeys:a.payload})},showModal:function(e,a){return(0,o.default)({},e,{showModal:a.payload})},allData:function(e,a){return(0,o.default)({},e,{allData:a.payload,paginationG:a.page})},searchList:function(e,a){return(0,o.default)({},e,{searchList:a.payload})},typedata:function(e,a){return(0,o.default)({},e,{typedata:a.payload})},logoUrl:function(e,a){return(0,o.default)({},e,{logoUrl:a.payload})},setCheck:function(e,a){return(0,o.default)({},e,{checkData:a.payload})},checkData:function(e,a){return(0,o.default)({},e,{checkData:a.payload})},setInfo:function(e,a){return(0,o.default)({},e,{userInfo:a.payload})},orgData2:function(e,a){return(0,o.default)({},e,{orgData2:a.payload})},setPage:function(e,a){return(0,o.default)({},e,{pageindex:a.payload,pagesize:a.size})}}},e.exports=a.default}});