webpackJsonp([45],{790:function(e,r,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var t=a(3),l=n(t),c=a(209),d=n(c),o=a(147),i=n(o);a(210);var u=a(319),s=a(60);r.default={namespace:"orginfo",state:{orgData:[],userInfo:{}},subscriptions:{setup:function(e){var r=e.dispatch;e.history.listen(function(e){if("/organization/orgInfo"===e.pathname){r({type:"clearData"});var a=(0,s.getQueryStringHash)("ids"),n={};r({type:"qeryQrg",payload:n}),n.id=a,r({type:"queryUser",payload:n})}})}},effects:{qeryQrg:i.default.mark(function e(r,a){var n,t,l,c,d,o=r.payload,s=a.call,f=a.put;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(u.qeryQrg,o);case 2:if(n=e.sent,200!=n.code){e.next=8;break}for(t=n.data,l=0;l<t.length;l++)if(t[l].orgName?t[l].label=t[l].orgName:t[l].label=t[l].shopName,t[l].value=t[l].id,t[l].children)for(c=0;c<t[l].children.length;c++)if(t[l].children[c].orgName?t[l].children[c].label=t[l].children[c].orgName:t[l].children[c].label=t[l].children[c].shopName,t[l].children[c].value=t[l].children[c].id,t[l].children[c].children)for(d=0;d<t[l].children[c].children.length;d++)t[l].children[c].children[d].orgName?t[l].children[c].children[d].label=t[l].children[c].children[d].orgName:t[l].children[c].children[d].label=t[l].children[c].children[d].shopName,t[l].children[c].children[d].value=t[l].children[c].children[d].id;return e.next=8,f({type:"querySuccess",payload:t});case 8:case"end":return e.stop()}},e,this)}),queryUser:i.default.mark(function e(r,a){var n,t=r.payload,l=a.call,c=a.put;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(u.orgUserInfo,t);case 2:if(n=e.sent,200!=n.code){e.next=6;break}return e.next=6,c({type:"setInfo",payload:n.data});case 6:case"end":return e.stop()}},e,this)}),addUser:i.default.mark(function e(r,a){var n,t=r.payload,l=a.call;a.put;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(u.addUser,t);case 2:n=e.sent,200==n.code?(d.default.success("\u4fee\u6539\u6210\u529f\uff01"),setTimeout(function(){history.go(-1)},500)):d.default.error("\u4fee\u6539\u5931\u8d25\uff0c"+n.msg);case 4:case"end":return e.stop()}},e,this)})},reducers:{querySuccess:function(e,r){return(0,l.default)({},e,{orgData:r.payload})},clearData:function(e){return(0,l.default)({},e,{orgData:[],userInfo:{}})},setInfo:function(e,r){return(0,l.default)({},e,{userInfo:r.payload})}}},e.exports=r.default}});