webpackJsonp([57],{796:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(3),u=r(n),s=a(209),c=r(s),d=a(147),o=r(d),l=a(342),i=r(l);a(210);var p=a(319);a(60);t.default={namespace:"proList",state:{data:[],paginationG:{},searchList:{},pageindex:1,pagesize:10,classifyData:[],catId:"",selected:2,companyList:[],typedata:[],orgData:[],history:null,showModal:!1,deviceData:[],device_pageindex:1,device_pagesize:10,device_paginationG:null,device_searchList:{},details:null,selectedRowKeys:[]},subscriptions:{setup:function(e){var t=e.dispatch;e.history.listen(function(e){"/pro/proList"===e.pathname&&(t({type:"clearData"}),t({type:"queryHistory"}))})}},effects:{queryHistory:o.default.mark(function e(t,a){var r,n,u=(a.call,a.put),s=a.select;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.default)(t),e.next=3,s(function(e){return e.proList});case 3:return r=e.sent,n=r.searchList,e.next=7,u({type:"queryRule",payload:{}});case 7:return e.next=9,u({type:"queryTypes",payload:{pageindex:1,pageSize:0}});case 9:case"end":return e.stop()}},e,this)}),queryDevice:o.default.mark(function e(t,a){var r,n,u,s,c=t.payload,d=a.call,l=a.put;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(p.deviceLisks,c);case 2:if(r=e.sent,200!=r.code){e.next=22;break}if(null!=r.data.data&&0!=r.data.data.length){e.next=14;break}return n={},n.total=0,n.pageSize=0,n.current=0,n.pageCount=0,e.next=12,l({type:"deviceData",payload:[],page:n});case 12:e.next=22;break;case 14:return u={},u.total=r.data.totalCount,u.pageSize=r.data.pageSize,u.current=r.data.currentIndex,s=Math.ceil(r.data.totalCount/r.data.pageSize),u.pageCount=s,e.next=22,l({type:"deviceData",payload:r.data.data,page:u});case 22:case"end":return e.stop()}},e,this)}),queryTypes:o.default.mark(function e(t,a){var r,n=t.payload,u=a.call,s=a.put;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(p.dotTypeList,n);case 2:if(r=e.sent,200!=r.code||null===r.data.data){e.next=6;break}return e.next=6,s({type:"queryType",payload:r.data.data});case 6:case"end":return e.stop()}},e,this)}),queryDetail:o.default.mark(function e(t,a){var r,n=t.payload,u=a.call,s=a.put;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(p.proInfos,n);case 2:if(r=e.sent,200!=r.code||null===r.data){e.next=8;break}return e.next=6,s({type:"details",payload:r.data});case 6:return e.next=8,s({type:"queryDevice",payload:{}});case 8:case"end":return e.stop()}},e,this)}),buildDevice:o.default.mark(function e(t,a){var r,n=t.payload,u=t.searchList,s=a.call,d=a.put;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(p.proAdd,n);case 2:if(r=e.sent,200!=r.code){e.next=7;break}return c.default.success("\u7ed1\u5b9a\u6210\u529f\uff01"),e.next=7,d({type:"queryDevice",payload:u});case 7:case"end":return e.stop()}},e,this)}),delDevice:o.default.mark(function e(t,a){var r,n=t.payload,u=t.searchList,s=a.call,d=a.put;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(p.proAdd,n);case 2:if(r=e.sent,200!=r.code){e.next=7;break}return c.default.success("\u89e3\u9664\u7ed1\u5b9a\u6210\u529f\uff01"),e.next=7,d({type:"queryDevice",payload:u});case 7:case"end":return e.stop()}},e,this)}),addPro:o.default.mark(function e(t,a){var r,n=t.payload,u=a.call;a.put;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(p.proAdd,n);case 2:r=e.sent,r.code;case 4:case"end":return e.stop()}},e,this)}),dotDelete:o.default.mark(function e(t,a){var r,n,u=t.payload,s=t.searchList,d=a.call,l=a.put;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(p.proDel,u);case 2:if(r=e.sent,200!=r.code){e.next=8;break}return c.default.success("\u5220\u9664\u6210\u529f!"),n=s,e.next=8,l({type:"queryRule",payload:n});case 8:case"end":return e.stop()}},e,this)}),dotDeleteMore:o.default.mark(function e(t,a){var r,n=t.payload,u=a.call;a.put;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(p.proDel,n);case 2:r=e.sent;case 3:case"end":return e.stop()}},e,this)}),queryRule:o.default.mark(function e(t,a){var r,n,u,s,c,d,l=t.payload,i=a.call,f=a.put;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(p.proLists,l);case 2:if(r=e.sent,200!=r.code){e.next=24;break}if(null!=r.data.data&&0!=r.data.data.length){e.next=14;break}return n={},n.total=0,n.pageSize=0,n.current=0,n.pageCount=0,e.next=12,f({type:"querySuccess",payload:[],page:n});case 12:e.next=24;break;case 14:for(u={},u.total=r.data.totalCount,u.pageSize=r.data.pageSize,u.current=r.data.currentIndex,s=Math.ceil(r.data.totalCount/r.data.pageSize),u.pageCount=s,c=r.data.data,d=0;d<c.length;d++)c[d].key=c[d].pointId;return e.next=24,f({type:"querySuccess",payload:c,page:u});case 24:case"end":return e.stop()}},e,this)}),delProduct:o.default.mark(function e(t,a){var r,n,u=t.payload,s=t.selected,d=a.call,l=a.put;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(p.productDel,u);case 2:if(r=e.sent,200!=r.code){e.next=11;break}return c.default.success("\u5220\u9664\u6210\u529f!"),n={},n.goodsStatus=s,e.next=9,l({type:"queryRule",payload:n});case 9:e.next=12;break;case 11:c.default.error("\u5220\u9664\u5931\u8d25\uff0c"+r.msg);case 12:case"end":return e.stop()}},e,this)})},reducers:{clearData:function(e){return(0,u.default)({},e,{data:[],paginationG:{},searchList:{},pageindex:1,pagesize:10,classifyData:[],catId:"",selected:2,companyList:[],history:null,deviceData:[],details:null,selectedRowKeys:[]})},selectedRowKeys:function(e,t){return(0,u.default)({},e,{selectedRowKeys:t.payload})},details:function(e,t){return(0,u.default)({},e,{details:t.payload})},deviceData:function(e,t){return(0,u.default)({},e,{deviceData:t.payload,device_paginationG:t.page})},searchList2:function(e,t){return(0,u.default)({},e,{device_searchList:t.payload})},showModal:function(e,t){return(0,u.default)({},e,{showModal:t.payload})},orgData:function(e,t){return(0,u.default)({},e,{orgData:t.payload})},queryType:function(e,t){return(0,u.default)({},e,{typedata:t.payload})},companyList:function(e,t){return(0,u.default)({},e,{companyList:t.payload})},selected:function(e,t){return(0,u.default)({},e,{selected:t.payload})},queryClassData:function(e,t){return(0,u.default)({},e,{classifyData:t.payload})},catId:function(e,t){return(0,u.default)({},e,{catId:t.payload})},querySuccess:function(e,t){return(0,u.default)({},e,{data:t.payload,paginationG:t.page})},searchList:function(e,t){return(0,u.default)({},e,{searchList:t.payload})},history:function(e,t){return(0,u.default)({},e,{history:t.payload})},setPage:function(e,t){return(0,u.default)({},e,{pageindex:t.payload,pagesize:t.size})},device_setPage:function(e,t){return(0,u.default)({},e,{device_pageindex:t.payload,device_pagesize:t.size})}}},e.exports=t.default}});