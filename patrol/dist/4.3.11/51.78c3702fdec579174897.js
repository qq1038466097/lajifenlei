webpackJsonp([51],{786:function(e,a,r){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var n=r(3),o=t(n),u=r(209),l=t(u),d=r(147),c=t(d);r(210);var s=r(319),i=r(60);a.default={namespace:"addorganization",state:{roleData:[],orgData:[],logoUrl:"",roleId:"",chooseOrgId:[]},subscriptions:{setup:function(e){var a=e.dispatch;e.history.listen(function(e){if("/organization/addOrganization"===e.pathname){a({type:"clearData"});var r={};if(null==i.isAdmin){for(var t=i.myOrg,n=0;n<t.length;n++){var o=t[n];o.label=o.orgName,o.value=o.id}a({type:"querySuccess",payload:t})}else a({type:"qeryQrg",payload:r});a({type:"queryRule",payload:r})}})}},effects:{queryRule:c.default.mark(function e(a,r){var t,n=a.payload,o=r.call,u=r.put;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(s.roleBindList,n);case 2:if(t=e.sent,200!=t.code){e.next=6;break}return e.next=6,u({type:"roleData",payload:t.data.data});case 6:case"end":return e.stop()}},e,this)}),qeryQrg:c.default.mark(function e(a,r){var t,n,o,u=a.payload,l=r.call,d=r.put;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(s.qeryQrg,u);case 2:if(t=e.sent,200!=t.code){e.next=9;break}return n=t.data,o=function e(a,r){for(var t=0;t<a.length;t++){var n=a[t];n.label=n.orgName,n.value=n.id,n.children&&n.children.length>0&&e(n.children)}},o(n),e.next=9,d({type:"querySuccess",payload:n});case 9:case"end":return e.stop()}},e,this)}),addUser:c.default.mark(function e(a,r){var t,n,o,u=a.payload,d=a.roleId,i=r.call,f=r.put;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(s.addUser,u);case 2:if(t=e.sent,200!=t.code){e.next=15;break}return l.default.success("\u65b0\u589e\u6210\u529f\uff01"),n=[],o={},o.userId=t.data.id,o.roleId=d,n.push(o),e.next=12,f({type:"bindRole",payload:n});case 12:setTimeout(function(){history.go(-1)},500),e.next=16;break;case 15:l.default.error("\u65b0\u589e\u5931\u8d25\uff0c"+t.msg);case 16:case"end":return e.stop()}},e,this)}),bindRole:c.default.mark(function e(a,r){var t,n=a.payload,o=r.call;r.put;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(s.BindUser,n);case 2:t=e.sent;case 3:case"end":return e.stop()}},e,this)})},reducers:{clrarData:function(e){return(0,o.default)({},e,{roleData:[],orgData:[],logoUrl:"",roleId:"",chooseOrgId:[]})},chooseOrgId:function(e,a){return(0,o.default)({},e,{chooseOrgId:a.payload})},querySuccess:function(e,a){return(0,o.default)({},e,{orgData:a.payload})},roleData:function(e,a){return(0,o.default)({},e,{roleData:a.payload})},roleId:function(e,a){return(0,o.default)({},e,{roleId:a.payload})},logoUrl:function(e,a){return(0,o.default)({},e,{logoUrl:a.payload})},clearData:function(e){return(0,o.default)({},e,{logoUrl:"",orgData:[],org:1})}}},e.exports=a.default}});